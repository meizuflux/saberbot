version: "3"

services:
    db:
        image: postgres
        ports:
            - 5432:5432
        environment:
            - POSTGRES_PASSWORD=secret
            - POSTGRES_USER=ppotatoo
            - POSTGRES_DB=bot
        volumes:
            - ~/docker/postgres:/var/lib/postgresql/data
    bot:
        build: .
        command: ["./wait-for-postgres.sh", "db", "python", "app.py"]
        ports:
            - 81:81
        depends_on:
            - db
